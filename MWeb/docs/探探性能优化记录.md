# 性能优化记录
## 关于NSDate
### pug_daysSinceDate
根据测试 NSDate (PUGDate) 下的 pug_daysSinceDate 方法 比较耗时，尤其在直播间切换时，平均可达20ms，有时高达40ms
![没优化](media/15952300732316/%E6%B2%A1%E4%BC%98%E5%8C%96.png)


### 优化 - NSDate (PUGLive)
推荐使用 NSDate (PUGLive) 里面的 pugLive_daysSinceDateLowAccuracy 方法
#### pugLive_daysSinceDate
方法精准度与pug_daysSinceDate一致，但是效率有所提高，如下图所示
![优化1](media/15952300732316/%E4%BC%98%E5%8C%961.png)

#### pugLive_daysSinceDateLowAccuracy
与上述方法可能存在1天的误差，因为实现上没有统一时区，但是绝大部份情况下是满足需求的，效率大幅度提高。
![优化2](media/15952300732316/%E4%BC%98%E5%8C%962.png)


## 2020-07-20
### CPU 使用率

### 内存
### SDK升级，常见测试问题，可能的问题（主要列出，可能是服务或者其他问题导致的）
1. PK结束后，再次进入直播间，直播状态还在显示PK，要过10s左右才结束，可能是长链接没发消息，导致直播间状态更新较慢。
2. 如果使用RTC的时候，PK进度条没显示，可能是腾讯的问题。
3. 

### 2020-10-16 观众端优化
1. 去除 观众端 非必要创建录制器 （礼物、猜歌迷）
2. 去除 观众端 美颜特效（PUGLiveCameraEffectPlugin）插件
3. 探测器安装逻辑优化 整个生命周期只需要安装一次，避免多次安装
